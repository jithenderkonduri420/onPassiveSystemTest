<h2>Register</h2>
<form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
  <div class="form-group">
    <label for="name">Username</label>
    <input
      type="text"
      formControlName="username"
      class="form-control"
      [ngClass]="{ 'is-invalid': submitted && f.username.errors }"
    />
    <div *ngIf="submitted && f.username.errors" class="invalid-feedback">
      <div *ngIf="f.username.errors.required">Username is required</div>
    </div>
  </div>
  <div class="form-group">
    <label for="password">Password</label>
    <input
      type="password"
      formControlName="password"
      class="form-control"
      [ngClass]="{ 'is-invalid': submitted && f.password.errors }"
    />
    <div *ngIf="submitted && f.password.errors" class="invalid-feedback">
      <div *ngIf="f.password.errors.required">Password is required</div>
      <div *ngIf="f.password.errors.minlength">
        Password must be at least 6 characters
      </div>
    </div>
  </div>
  <div class="form-group">
    <label for="city">Courses</label>
    <div *ngFor="let city of courses; let i = index" formArrayName="course">
      <input  type="checkbox" [formControlName]="i">
      <span>{{city}}</span>
    </div>

    <div *ngIf="submitted && f.city.errors" class="invalid-feedback">
      <div *ngIf="f.city.errors.required">City is required</div>
    </div>
  </div>

  <div class="form-group">
    <label for="city">City</label>
    <input
      type="text"
      formControlName="city"
      class="form-control"
      [ngClass]="{ 'is-invalid': submitted && f.city.errors }"
    />
    <div *ngIf="submitted && f.city.errors" class="invalid-feedback">
      <div *ngIf="f.city.errors.required">City is required</div>
    </div>
  </div>
  <div class="form-group">
    <label for="city">State</label>
    <input
      type="text"
      formControlName="state"
      class="form-control"
      [ngClass]="{ 'is-invalid': submitted && f.state.errors }"
    />
    <div *ngIf="submitted && f.state.errors" class="invalid-feedback">
      <div *ngIf="f.state.errors.required">State is required</div>
    </div>
  </div>

  <div class="form-group">
    <label for="password">Country</label>
    <select
      formControlName="country"
      class="form-control"
      [ngClass]="{ 'is-invalid': submitted && f.country.errors }"
    >
      <option [value]="country.code" *ngFor="let country of countries">
        {{ country.name }}
      </option>
    </select>
    <div *ngIf="submitted && f.country.errors" class="invalid-feedback">
      <div *ngIf="f.country.errors.required">Country is required</div>
    </div>
  </div>
  <div class="form-group">
    <button [disabled]="loading" class="btn btn-primary">
      <span
        *ngIf="loading"
        class="spinner-border spinner-border-sm mr-1"
      ></span>
      Register
    </button>
    <a routerLink="/login" class="btn btn-link">Cancel</a>
  </div>
</form>
